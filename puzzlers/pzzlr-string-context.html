<h1>A Matter of Context</h1>
<table class="table meta-table table-condensed">
  <tbody>
    <tr>
      <td class="header-column"><strong>Contributed by</strong></td>
      <td>Marconi Lanna</td>
    </tr>
    <tr>
      <td><strong>Source</strong></td>
      <td>N/A</td>
    </tr>
    <tr>
      <td><strong>First tested with Scala version</strong></td>
      <td>2.11.6</td>
    </tr>
  </tbody>
</table>
<div class="code-snippet">
  <h3>What is the result of executing the following code?</h3>
<pre class="prettyprint lang-scala">
def tmpDir(uniqueSuffix: String) =
  """\\builder\tmp-""" + uniqueSuffix
def tmpDir2(uniqueSuffix: String) =
  s"""\\builder\tmp-${uniqueSuffix}"""
def tmpDir3(uniqueSuffix: String) =
  s"\\builder\tmp-${uniqueSuffix}"

println(tmpDir("42"))
println(tmpDir2("42"))
println(tmpDir3("42"))
</pre>
  <ol>
    <li>Prints:
<pre class="prettyprint lang-scala">
\\builder\tmp-42
\\builder\tmp-42
\builder        mp-42
</pre>
    </li>
    <li>Prints:
<pre class="prettyprint lang-scala">
\\builder\tmp-42
\\builder\tmp-42
\\builder\tmp-42
</pre>
    </li>
    <li>The first and third statements print:
<pre class="prettyprint lang-scala">
\\builder\tmp-42
\builder        mp-42
</pre>
and the second throws a runtime exception
    </li>
    <li id="correct-answer">Prints:
<pre class="prettyprint lang-scala">
\\builder\tmp-42
\builder        mp-42
\builder        mp-42
</pre>
    </li>
  </ol>
</div>
<button id="show-and-tell" class="btn btn-primary" href="#">Display the correct answer, explanation and comments</button>
<div id="explanation" class="explanation" style="display:none">
  <h3>Explanation</h3>
  <p>
    When using the string context <tt>s</tt>, or any other string context, the
    treatment of escape sequences is not actually determined by the
    &quot;string-like expression&quot; immediately following the string
    context.
  </p>
  <p>
    Instead, as described in <a href="" target="_blank">SIP-</a>, the
    string-like expression following the context is <em>always</em> treated as
    an &quot;unescaped&quot; string, i.e. as if it were enclosed in
    triple-quotes. From the perspective of the treatment of escape
    characters, the expressions
    <tt>s"""\\builder\tmp-${uniqueSuffix}"""</tt> and
    <tt>s"\\builder\tmp-${uniqueSuffix}"</tt> are, therefore, equivalent.
    They are both rewritten to:
<pre class="prettyprint lang-scala">
    new StringContext("""\\builder\tmp-${uniqueSuffix}""").eval()
</pre>
  </p>
  <p>
    How escape sequences are interpreted depends on the implementation of the
    <tt>eval</tt> method. In the case of the string context <tt>s</tt>, these
    sequences are interpreted as they would be in a single-quoted string, so
    both the second and third <tt>println</tt> statements print
    <tt>\builder&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mp-42</tt>.
  </p>
</div>